<% content_for :title, "TinkerPal - #{@user.username}'s profile" %>
<div class="flex justify-between gap-30">
  <%# ----------Profile Details Div---------- %>
  <div data-edit-profile-target="details" class="flex-2 gap-4">
    <h1 class="font-bold text-2xl">Profile details</h1>
    <div class="mt-4">
      <p><strong>Username</strong></p>
      <div class="bg-gray-100 px-1 py-2 rounded-md mt-1">
        <%= @user.username %>
      </div>
    </div>
    <div class="mt-4">
      <p><strong>Location</strong></p>
      <div class="bg-gray-100 px-1 py-2 rounded-md mt-1">
        <%= @user.city.name %>
      </div>
    </div>
    <div class="mt-4">
      <p><strong>Member since</strong></p>
      <div class="bg-gray-100 px-1 py-2 rounded-md mt-1">
        <%= @user.created_at.strftime("%B %d, %Y") %>
      </div>
    </div>
    <div class="mt-4">
      <p><strong>About me</strong></p>
      <div class="bg-gray-100 px-1 py-2 rounded-md mt-1">
        <% if @user.about_me.blank? %>
          <p class="text-gray-400"><%= @user.username %> hasn't written a bio yet.</p>
        <% else %>
          <p><%= @user.about_me %></p>
        <% end %>
      </div>
    </div>
  </div>
  <%# ----------Task Cards--------- %>
  <div class="flex-3">
    <h1 class="font-bold text-2xl mb-4  border-slate-600"><%= @user.username %>'s tasks</h1>
    <div class="flex mb-4 justify-between items-center">
      <div data-controller="tab" class="flex gap-2">
        <%= link_to "Active", user_active_tasks_path(@user), data: {turbo_frame: "tasks", tab_target: "tab", action: "tab#select"}, class: "font-bold bg-gray-200 text-red-500 px-2 py-1 hover:bg-gray-200 hover:text-red-500 rounded-md transition duration-200" %>
        <%= link_to "Finished", user_finished_tasks_path(@user), data: {turbo_frame: "tasks", tab_target: "tab", action: "tab#select"}, class: "font-bold px-2 py-1 hover:bg-gray-200 hover:text-red-500 rounded-md transition duration-200" %>
      </div>
    </div>
    <%= turbo_frame_tag "tasks" do %>
      <% if @tasks.count > 0 %>
        <% @tasks.each do |task| %>
          <%= render "tasks/task_card", task: task %>
        <% end %>
      <% else %>
        <p class="text-xl px-2 font-bold text-slate-300"><%= @user.username %> does not have any active tasks</p>
      <% end %>
    <% end %>
  </div>
  <%# ----------Users Work--------- %>
  <div class="flex-2">
    <h1 class="font-bold text-2xl border-slate-600 mb-4"><%= @user.username %>'s work</h1>
    <%= render "overview", tasks_completed: @tasks_completed, average_price: @average_price, average_rating: @average_rating, reviews: @reviews %>
  </div>
</div>